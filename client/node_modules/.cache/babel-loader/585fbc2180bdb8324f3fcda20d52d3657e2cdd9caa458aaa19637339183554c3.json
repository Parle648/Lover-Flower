{"ast":null,"code":"import _slicedToArray from\"D:/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/redux/Lover-Flower/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import ProductSnippet from'../../entities/ProductSnippet/ProductSnippet';import styles from'./styles/basket.module.scss';import busketImg from'../../img/busket.svg';import close from'../../img/busket-close.png';import{useSelector,useDispatch}from'react-redux';import{updateStore}from'../../redux/slices/Busket.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Basket=function Basket(){var dispatch=useDispatch();var addedPeoducts=useSelector(function(state){return state.basket.value;});var count=addedPeoducts.reduce(function(amount,obj){return amount+obj.count;},0);var amount=addedPeoducts.reduce(function(amount,obj){return amount+obj.count*obj.cost;},0);// updating the store after a reload\nReact.useEffect(function(){dispatch(updateStore(JSON.parse(localStorage.BusketInform)));addedPeoducts=JSON.parse(localStorage.BusketInform);},[]);// toggle busket block\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),opened=_React$useState2[0],setOpened=_React$useState2[1];function toggleBusket(){setOpened(!opened);}return/*#__PURE__*/_jsxs(\"div\",{className:styles.block,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.container,onClick:toggleBusket,children:[/*#__PURE__*/_jsx(\"img\",{src:busketImg,alt:\"busketImg\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles.counter,\" \").concat(count<1&&styles.unvisible),children:count})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.busketAside,\" \").concat(opened&&styles.busketOpened),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:styles.asideTtl,children:[\"\\u0412\\u0430\\u0448\\u0430 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \",/*#__PURE__*/_jsx(\"img\",{className:styles.closeBtn,src:close,alt:\"close\",onClick:toggleBusket})]}),addedPeoducts.map(function(obj){return/*#__PURE__*/_jsx(ProductSnippet,{id:obj.id,ttl:obj.ttl,cost:obj.cost,count:obj.count});})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"p\",{className:styles.asideParagraph,children:[/*#__PURE__*/_jsxs(\"span\",{className:styles.green,children:[\"\\u041F\\u0440\\u0435\\u0434\\u0432\\u0430\\u0440\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0438\\u0442\\u043E\\u0433: \",amount,\" \\u0440\\u0443\\u0431.\"]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u0427\\u0442\\u043E\\u0431\\u044B \\u0443\\u0437\\u043D\\u0430\\u0442\\u044C \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438, \\u043F\\u0435\\u0440\\u0435\\u0439\\u0434\\u0438\\u0442\\u0435 \\u043A \\u043E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u044E \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430.\"]}),/*#__PURE__*/_jsx(\"a\",{href:\"/order\",children:/*#__PURE__*/_jsx(\"button\",{className:styles.btn,children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"})})]})]})]});};export default Basket;","map":{"version":3,"names":["React","ProductSnippet","styles","busketImg","close","useSelector","useDispatch","updateStore","jsx","_jsx","jsxs","_jsxs","Basket","dispatch","addedPeoducts","state","basket","value","count","reduce","amount","obj","cost","useEffect","JSON","parse","localStorage","BusketInform","_React$useState","useState","_React$useState2","_slicedToArray","opened","setOpened","toggleBusket","className","block","children","container","onClick","src","alt","concat","counter","unvisible","busketAside","busketOpened","asideTtl","closeBtn","map","id","ttl","asideParagraph","green","href","btn"],"sources":["D:/Рабочий стол/redux/Lover-Flower/client/src/features/Basket/index.tsx"],"sourcesContent":["import React from 'react';\r\nimport ProductSnippet from '../../entities/ProductSnippet/ProductSnippet';\r\nimport styles from './styles/basket.module.scss';\r\nimport busketImg from '../../img/busket.svg';\r\nimport close from '../../img/busket-close.png';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updateStore } from '../../redux/slices/Busket.js';\r\n\r\ntype Product = {\r\n    id: number,\r\n    cost: number,\r\n    ttl: string,\r\n    count: number,\r\n}\r\n\r\nconst Basket = () => {\r\n    const dispatch = useDispatch();\r\n    \r\n    let addedPeoducts = useSelector((state: any) => state.basket.value);\r\n    const count = addedPeoducts.reduce((amount: number, obj: Product) => {return amount + obj.count}, 0);\r\n    const amount = addedPeoducts.reduce((amount: number, obj: Product) => {return amount + (obj.count * obj.cost)}, 0);\r\n\r\n    // updating the store after a reload\r\n    React.useEffect(() => {\r\n        dispatch(updateStore(JSON.parse(localStorage.BusketInform)))\r\n        addedPeoducts = JSON.parse(localStorage.BusketInform)\r\n    }, [])\r\n\r\n    // toggle busket block\r\n    const [opened, setOpened] = React.useState(false)\r\n    function toggleBusket() {\r\n        setOpened(!opened)\r\n    }\r\n    \r\n    return (\r\n        <div className={styles.block}>\r\n            <div className={styles.container} onClick={toggleBusket}>\r\n                <img src={busketImg} alt=\"busketImg\" />\r\n                <div className={`${styles.counter} ${count < 1 && styles.unvisible}`}>{count}</div>\r\n            </div>\r\n            <div className={`${styles.busketAside} ${opened && styles.busketOpened}`} >\r\n                <div className=\"\">\r\n                    <h2 className={styles.asideTtl}>Ваша корзина <img className={styles.closeBtn} src={close} alt=\"close\" onClick={toggleBusket}/></h2>\r\n                        {\r\n                            addedPeoducts.map((obj: Product) => {\r\n                                return <ProductSnippet id={obj.id} ttl={obj.ttl} cost={obj.cost} count={obj.count} />\r\n                            })\r\n                        }\r\n                </div>\r\n                <div className=\"\">\r\n                    <p className={styles.asideParagraph}>\r\n                        <span className={styles.green}>Предварительный итог: {amount} руб.</span> <br />\r\n                        Чтобы узнать стоимость доставки, перейдите к оформлению заказа.\r\n                    </p>\r\n                    <a href=\"/order\"><button className={styles.btn}>Оформить заказ</button></a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Basket;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}