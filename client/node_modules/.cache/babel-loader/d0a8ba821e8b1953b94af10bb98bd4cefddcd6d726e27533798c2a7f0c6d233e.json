{"ast":null,"code":"import _objectSpread from\"D:/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/redux/Lover-Flower/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _defineProperty from\"D:/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/redux/Lover-Flower/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import React from'react';import{useForm}from'react-hook-form';import{useDispatch,useSelector}from'react-redux';import{pushParam,popParam}from'../../redux/slices/Params';import{update}from'../../redux/slices/Products';import styles from'./styles/SortByProps.module.scss';import getCurrentProducts from'./api/getProducts.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SortByProps=function SortByProps(){var dispatch=useDispatch();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var sendProps=function sendProps(){};var filters=[{ttl:'ПО СВЕТУ',name:'light',variants:['нежные','яркие']},{ttl:'ПО ЦВЕТУ',name:'cost',variants:['белый','желтый','зеленый','красный','оранжевый','розовый','синий']},{ttl:'ПО ФОРМАТУ',name:'format',variants:['букет','в вазе','в конверте','в корзине','в шляпной коробке','в ящике']},{ttl:'СТОИМОСТЬ',name:'Cost',variants:['нежные','нежные']},{ttl:'ПО ЦВЕТКУ',name:'flowers',variants:['Альстромерия','Астильба','Альстромерия','Астильба','Альстромерия','Альстромерия','Альстромерия','Альстромерия','Астильба','Астильба','Астильба','Астильба','Астильба','Альстромерия']}];// Redux state\nvar types=useSelector(function(state){return state.prodTypes;});var sortBy=useSelector(function(state){return state.sortby;});var props=useSelector(function(state){return state.Params;});React.useEffect(function(){var obj={types:types,sortBy:sortBy,props:props};// Make request\ntry{getCurrentProducts(obj).then(function(res){dispatch(update(res));});}catch(err){console.error(err);}},[props]);var updateParams=function updateParams(event){var _event$currentTarget$,_event$currentTarget$2,_event$currentTarget$3;event===null||event===void 0?void 0:(_event$currentTarget$=event.currentTarget.previousElementSibling)===null||_event$currentTarget$===void 0?void 0:_event$currentTarget$.classList.toggle(styles.active);// take targetElem props\nvar name=event===null||event===void 0?void 0:event.currentTarget.name;var inputValue=event===null||event===void 0?void 0:(_event$currentTarget$2=event.currentTarget.nextElementSibling)===null||_event$currentTarget$2===void 0?void 0:_event$currentTarget$2.innerHTML;// UPD State for Params\nif(event!==null&&event!==void 0&&(_event$currentTarget$3=event.currentTarget.previousElementSibling)!==null&&_event$currentTarget$3!==void 0&&_event$currentTarget$3.classList.contains(styles.active)){dispatch(pushParam(_defineProperty({},name,inputValue)));}else{dispatch(popParam(_defineProperty({},name,inputValue)));}};return/*#__PURE__*/_jsx(\"form\",{className:styles.block,onSubmit:handleSubmit(sendProps),children:filters.map(function(topic){return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:topic.ttl}),/*#__PURE__*/_jsx(\"div\",{className:styles.inputs,children:topic.variants.map(function(vari){return/*#__PURE__*/_jsxs(\"label\",{className:styles.label,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.fakeCheckbox}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:styles.checkbox,type:'checkbox'},register(\"\".concat(topic.name),{onChange:updateParams}))),/*#__PURE__*/_jsx(\"span\",{className:styles.inputText,children:vari})]});})})]});})});};export default SortByProps;","map":{"version":3,"names":["React","useForm","useDispatch","useSelector","pushParam","popParam","update","styles","getCurrentProducts","jsx","_jsx","jsxs","_jsxs","SortByProps","dispatch","_useForm","register","handleSubmit","sendProps","filters","ttl","name","variants","types","state","prodTypes","sortBy","sortby","props","Params","useEffect","obj","then","res","err","console","error","updateParams","event","_event$currentTarget$","_event$currentTarget$2","_event$currentTarget$3","currentTarget","previousElementSibling","classList","toggle","active","inputValue","nextElementSibling","innerHTML","contains","_defineProperty","className","block","onSubmit","children","map","topic","title","inputs","vari","label","fakeCheckbox","_objectSpread","checkbox","type","concat","onChange","inputText"],"sources":["D:/Рабочий стол/redux/Lover-Flower/client/src/features/SortByProps/SortByProps.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { pushParam, popParam } from '../../redux/slices/Params';\r\nimport { update } from '../../redux/slices/Products';\r\nimport styles from './styles/SortByProps.module.scss';\r\nimport getCurrentProducts from './api/getProducts.js';\r\n\r\nconst SortByProps = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n    } = useForm()\r\n\r\n    const sendProps = () => {};\r\n\r\n    const filters = [\r\n        {ttl: 'ПО СВЕТУ', name: 'light', variants: ['нежные', 'яркие']},\r\n        {ttl: 'ПО ЦВЕТУ', name: 'cost', variants: ['белый', 'желтый', 'зеленый', 'красный', 'оранжевый', 'розовый', 'синий']},\r\n        {ttl: 'ПО ФОРМАТУ', name: 'format', variants: ['букет', 'в вазе', 'в конверте', 'в корзине', 'в шляпной коробке', 'в ящике']},\r\n        {ttl: 'СТОИМОСТЬ', name: 'Cost', variants: ['нежные', 'нежные']},\r\n        {ttl: 'ПО ЦВЕТКУ', name: 'flowers', variants: ['Альстромерия', 'Астильба', 'Альстромерия', 'Астильба', 'Альстромерия', 'Альстромерия', 'Альстромерия', 'Альстромерия', 'Астильба', 'Астильба', 'Астильба', 'Астильба', 'Астильба', 'Альстромерия']},\r\n    ]\r\n\r\n    // Redux state\r\n    const types = useSelector((state: any) => state.prodTypes);\r\n    const sortBy = useSelector((state: any) => state.sortby);\r\n    const props = useSelector((state: any) => state.Params);\r\n\r\n    React.useEffect(() => {\r\n        const obj = { types, sortBy, props };\r\n\r\n        // Make request\r\n        try {\r\n            getCurrentProducts(obj)\r\n            .then((res: any) => {\r\n                dispatch(update(res));\r\n            })\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n    }, [props])\r\n    \r\n    const updateParams = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        event?.currentTarget.previousElementSibling?.classList.toggle(styles.active);\r\n\r\n        // take targetElem props\r\n        const name = event?.currentTarget.name;\r\n        const inputValue = event?.currentTarget.nextElementSibling?.innerHTML;\r\n        \r\n        // UPD State for Params\r\n        if (event?.currentTarget.previousElementSibling?.classList.contains(styles.active)) {\r\n            dispatch(pushParam({[name]: inputValue}))\r\n        } else {\r\n            dispatch(popParam({[name]: inputValue}))\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form className={styles.block} onSubmit={handleSubmit(sendProps)}>\r\n        {filters.map(topic => {\r\n            return (\r\n                <div className=\"\">\r\n                    <h2 className={styles.title}>{topic.ttl}</h2>\r\n                    <div className={styles.inputs}>\r\n                        {topic.variants.map((vari) => {\r\n                            return (\r\n                                <label className={styles.label}>\r\n                                    <div className={styles.fakeCheckbox}></div>\r\n                                    <input className={styles.checkbox} type={'checkbox'} {...register(`${topic.name}`, { onChange: updateParams })}/>\r\n                                    <span className={styles.inputText}>{vari}</span>\r\n                                </label>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            );\r\n        })}\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default SortByProps;"],"mappings":"6WAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,SAAS,CAAEC,QAAQ,KAAQ,2BAA2B,CAC/D,OAASC,MAAM,KAAQ,6BAA6B,CACpD,MAAO,CAAAC,MAAM,KAAM,kCAAkC,CACrD,MAAO,CAAAC,kBAAkB,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtD,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACtB,GAAM,CAAAC,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAE9B,IAAAa,QAAA,CAGId,OAAO,CAAC,CAAC,CAFTe,QAAQ,CAAAD,QAAA,CAARC,QAAQ,CACRC,YAAY,CAAAF,QAAA,CAAZE,YAAY,CAGhB,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CAAC,CAAC,CAE1B,GAAM,CAAAC,OAAO,CAAG,CACZ,CAACC,GAAG,CAAE,UAAU,CAAEC,IAAI,CAAE,OAAO,CAAEC,QAAQ,CAAE,CAAC,QAAQ,CAAE,OAAO,CAAC,CAAC,CAC/D,CAACF,GAAG,CAAE,UAAU,CAAEC,IAAI,CAAE,MAAM,CAAEC,QAAQ,CAAE,CAAC,OAAO,CAAE,QAAQ,CAAE,SAAS,CAAE,SAAS,CAAE,WAAW,CAAE,SAAS,CAAE,OAAO,CAAC,CAAC,CACrH,CAACF,GAAG,CAAE,YAAY,CAAEC,IAAI,CAAE,QAAQ,CAAEC,QAAQ,CAAE,CAAC,OAAO,CAAE,QAAQ,CAAE,YAAY,CAAE,WAAW,CAAE,mBAAmB,CAAE,SAAS,CAAC,CAAC,CAC7H,CAACF,GAAG,CAAE,WAAW,CAAEC,IAAI,CAAE,MAAM,CAAEC,QAAQ,CAAE,CAAC,QAAQ,CAAE,QAAQ,CAAC,CAAC,CAChE,CAACF,GAAG,CAAE,WAAW,CAAEC,IAAI,CAAE,SAAS,CAAEC,QAAQ,CAAE,CAAC,cAAc,CAAE,UAAU,CAAE,cAAc,CAAE,UAAU,CAAE,cAAc,CAAE,cAAc,CAAE,cAAc,CAAE,cAAc,CAAE,UAAU,CAAE,UAAU,CAAE,UAAU,CAAE,UAAU,CAAE,UAAU,CAAE,cAAc,CAAC,CAAC,CACtP,CAED;AACA,GAAM,CAAAC,KAAK,CAAGpB,WAAW,CAAC,SAACqB,KAAU,QAAK,CAAAA,KAAK,CAACC,SAAS,GAAC,CAC1D,GAAM,CAAAC,MAAM,CAAGvB,WAAW,CAAC,SAACqB,KAAU,QAAK,CAAAA,KAAK,CAACG,MAAM,GAAC,CACxD,GAAM,CAAAC,KAAK,CAAGzB,WAAW,CAAC,SAACqB,KAAU,QAAK,CAAAA,KAAK,CAACK,MAAM,GAAC,CAEvD7B,KAAK,CAAC8B,SAAS,CAAC,UAAM,CAClB,GAAM,CAAAC,GAAG,CAAG,CAAER,KAAK,CAALA,KAAK,CAAEG,MAAM,CAANA,MAAM,CAAEE,KAAK,CAALA,KAAM,CAAC,CAEpC;AACA,GAAI,CACApB,kBAAkB,CAACuB,GAAG,CAAC,CACtBC,IAAI,CAAC,SAACC,GAAQ,CAAK,CAChBnB,QAAQ,CAACR,MAAM,CAAC2B,GAAG,CAAC,CAAC,CACzB,CAAC,CAAC,CACN,CAAE,MAAOC,GAAG,CAAE,CACVC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC,CACtB,CACJ,CAAC,CAAE,CAACN,KAAK,CAAC,CAAC,CAEX,GAAM,CAAAS,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAA0C,CAAK,KAAAC,qBAAA,CAAAC,sBAAA,CAAAC,sBAAA,CACjEH,KAAK,SAALA,KAAK,kBAAAC,qBAAA,CAALD,KAAK,CAAEI,aAAa,CAACC,sBAAsB,UAAAJ,qBAAA,iBAA3CA,qBAAA,CAA6CK,SAAS,CAACC,MAAM,CAACtC,MAAM,CAACuC,MAAM,CAAC,CAE5E;AACA,GAAM,CAAAzB,IAAI,CAAGiB,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEI,aAAa,CAACrB,IAAI,CACtC,GAAM,CAAA0B,UAAU,CAAGT,KAAK,SAALA,KAAK,kBAAAE,sBAAA,CAALF,KAAK,CAAEI,aAAa,CAACM,kBAAkB,UAAAR,sBAAA,iBAAvCA,sBAAA,CAAyCS,SAAS,CAErE;AACA,GAAIX,KAAK,SAALA,KAAK,YAAAG,sBAAA,CAALH,KAAK,CAAEI,aAAa,CAACC,sBAAsB,UAAAF,sBAAA,WAA3CA,sBAAA,CAA6CG,SAAS,CAACM,QAAQ,CAAC3C,MAAM,CAACuC,MAAM,CAAC,CAAE,CAChFhC,QAAQ,CAACV,SAAS,CAAA+C,eAAA,IAAG9B,IAAI,CAAG0B,UAAU,CAAC,CAAC,CAAC,CAC7C,CAAC,IAAM,CACHjC,QAAQ,CAACT,QAAQ,CAAA8C,eAAA,IAAG9B,IAAI,CAAG0B,UAAU,CAAC,CAAC,CAAC,CAC5C,CACJ,CAAC,CAED,mBACIrC,IAAA,SAAM0C,SAAS,CAAE7C,MAAM,CAAC8C,KAAM,CAACC,QAAQ,CAAErC,YAAY,CAACC,SAAS,CAAE,CAAAqC,QAAA,CAChEpC,OAAO,CAACqC,GAAG,CAAC,SAAAC,KAAK,CAAI,CAClB,mBACI7C,KAAA,QAAKwC,SAAS,CAAC,EAAE,CAAAG,QAAA,eACb7C,IAAA,OAAI0C,SAAS,CAAE7C,MAAM,CAACmD,KAAM,CAAAH,QAAA,CAAEE,KAAK,CAACrC,GAAG,CAAK,CAAC,cAC7CV,IAAA,QAAK0C,SAAS,CAAE7C,MAAM,CAACoD,MAAO,CAAAJ,QAAA,CACzBE,KAAK,CAACnC,QAAQ,CAACkC,GAAG,CAAC,SAACI,IAAI,CAAK,CAC1B,mBACIhD,KAAA,UAAOwC,SAAS,CAAE7C,MAAM,CAACsD,KAAM,CAAAN,QAAA,eAC3B7C,IAAA,QAAK0C,SAAS,CAAE7C,MAAM,CAACuD,YAAa,CAAM,CAAC,cAC3CpD,IAAA,SAAAqD,aAAA,EAAOX,SAAS,CAAE7C,MAAM,CAACyD,QAAS,CAACC,IAAI,CAAE,UAAW,EAAKjD,QAAQ,IAAAkD,MAAA,CAAIT,KAAK,CAACpC,IAAI,EAAI,CAAE8C,QAAQ,CAAE9B,YAAa,CAAC,CAAC,CAAE,CAAC,cACjH3B,IAAA,SAAM0C,SAAS,CAAE7C,MAAM,CAAC6D,SAAU,CAAAb,QAAA,CAAEK,IAAI,CAAO,CAAC,EAC7C,CAAC,CAEhB,CAAC,CAAC,CACD,CAAC,EACL,CAAC,CAEd,CAAC,CAAC,CACI,CAAC,CAEf,CAAC,CAED,cAAe,CAAA/C,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}