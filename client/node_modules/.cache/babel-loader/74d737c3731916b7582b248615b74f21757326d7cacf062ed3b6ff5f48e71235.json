{"ast":null,"code":"import _slicedToArray from\"D:/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/redux/Lover-Flower/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useDispatch}from'react-redux';import{addProduct}from'../../redux/slices/Busket.js';import styles from'./styles/slidercart.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(_ref){var id=_ref.id,img=_ref.img,ttl=_ref.ttl,cost=_ref.cost;var dispatch=useDispatch();function updateStore(event){var productInformData={id:id,cost:cost,ttl:ttl,count:1};if(!event.currentTarget.classList.contains('btnDisabled')){event.currentTarget.classList.add('btnDisabled');localStorage.BusketInform=JSON.stringify(JSON.parse(localStorage.BusketInform).concat(productInformData));dispatch(addProduct(productInformData));}}var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),disabled=_React$useState2[0],setDisabled=_React$useState2[1];React.useEffect(function(){if(JSON.parse(localStorage.BusketInform).some(function(obj){return obj.id===id;})){setDisabled(true);}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.block,id:\"\".concat(id),children:[/*#__PURE__*/_jsxs(\"a\",{href:\"/catalog/:\".concat(id),children:[/*#__PURE__*/_jsx(\"img\",{className:styles.img,src:img,alt:\"img\"}),/*#__PURE__*/_jsx(\"h2\",{className:styles.ttl,children:ttl}),/*#__PURE__*/_jsx(\"h2\",{className:styles.cost,children:cost})]}),/*#__PURE__*/_jsx(\"button\",{className:\"whiteBtn \".concat(disabled&&'btnDisabled'),onClick:updateStore,children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]});};export default Index;","map":{"version":3,"names":["React","useDispatch","addProduct","styles","jsx","_jsx","jsxs","_jsxs","Index","_ref","id","img","ttl","cost","dispatch","updateStore","event","productInformData","count","currentTarget","classList","contains","add","localStorage","BusketInform","JSON","stringify","parse","concat","_React$useState","useState","_React$useState2","_slicedToArray","disabled","setDisabled","useEffect","some","obj","className","block","children","href","src","alt","onClick"],"sources":["D:/Рабочий стол/redux/Lover-Flower/client/src/entities/SliderCart/index.tsx"],"sourcesContent":["import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { addProduct } from '../../redux/slices/Busket.js';\r\nimport styles from './styles/slidercart.module.scss';\r\n\r\ntype CartType = {\r\n    id: number,\r\n    img: string,\r\n    ttl: string,\r\n    cost: string,\r\n}\r\n\r\nconst Index = ({id, img, ttl, cost}: CartType) => {\r\n    const dispatch = useDispatch();\r\n\r\n    function updateStore(event: React.MouseEvent<HTMLButtonElement>) {\r\n        const productInformData = { id, cost, ttl, count: 1 }\r\n\r\n        if (!event.currentTarget.classList.contains('btnDisabled')) {\r\n            event.currentTarget.classList.add('btnDisabled')\r\n\r\n            localStorage.BusketInform = JSON.stringify(JSON.parse(localStorage.BusketInform).concat(productInformData));\r\n            dispatch(addProduct(productInformData));\r\n        }\r\n\r\n    }\r\n\r\n    const [disabled, setDisabled] = React.useState(false)\r\n\r\n    React.useEffect(() => {\r\n        if (JSON.parse(localStorage.BusketInform).some((obj: any) => obj.id === id)) {\r\n            setDisabled(true)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div className={styles.block} id={`${id}`}>\r\n            <a href={`/catalog/:${id}`}>\r\n                <img className={styles.img} src={img} alt=\"img\" />\r\n                <h2 className={styles.ttl}>{ttl}</h2>\r\n                <h2 className={styles.cost}>{cost}</h2>\r\n            </a>    \r\n            <button className={`whiteBtn ${disabled && 'btnDisabled'}`} onClick={updateStore}>В корзину</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Index;"],"mappings":"sLAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,aAAa,CAEzC,OAASC,UAAU,KAAQ,8BAA8B,CACzD,MAAO,CAAAC,MAAM,KAAM,iCAAiC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBASrD,GAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAAC,IAAA,CAAuC,IAAlC,CAAAC,EAAE,CAAAD,IAAA,CAAFC,EAAE,CAAEC,GAAG,CAAAF,IAAA,CAAHE,GAAG,CAAEC,GAAG,CAAAH,IAAA,CAAHG,GAAG,CAAEC,IAAI,CAAAJ,IAAA,CAAJI,IAAI,CAC9B,GAAM,CAAAC,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9B,QAAS,CAAAc,WAAWA,CAACC,KAA0C,CAAE,CAC7D,GAAM,CAAAC,iBAAiB,CAAG,CAAEP,EAAE,CAAFA,EAAE,CAAEG,IAAI,CAAJA,IAAI,CAAED,GAAG,CAAHA,GAAG,CAAEM,KAAK,CAAE,CAAE,CAAC,CAErD,GAAI,CAACF,KAAK,CAACG,aAAa,CAACC,SAAS,CAACC,QAAQ,CAAC,aAAa,CAAC,CAAE,CACxDL,KAAK,CAACG,aAAa,CAACC,SAAS,CAACE,GAAG,CAAC,aAAa,CAAC,CAEhDC,YAAY,CAACC,YAAY,CAAGC,IAAI,CAACC,SAAS,CAACD,IAAI,CAACE,KAAK,CAACJ,YAAY,CAACC,YAAY,CAAC,CAACI,MAAM,CAACX,iBAAiB,CAAC,CAAC,CAC3GH,QAAQ,CAACZ,UAAU,CAACe,iBAAiB,CAAC,CAAC,CAC3C,CAEJ,CAEA,IAAAY,eAAA,CAAgC7B,KAAK,CAAC8B,QAAQ,CAAC,KAAK,CAAC,CAAAC,gBAAA,CAAAC,cAAA,CAAAH,eAAA,IAA9CI,QAAQ,CAAAF,gBAAA,IAAEG,WAAW,CAAAH,gBAAA,IAE5B/B,KAAK,CAACmC,SAAS,CAAC,UAAM,CAClB,GAAIV,IAAI,CAACE,KAAK,CAACJ,YAAY,CAACC,YAAY,CAAC,CAACY,IAAI,CAAC,SAACC,GAAQ,QAAK,CAAAA,GAAG,CAAC3B,EAAE,GAAKA,EAAE,GAAC,CAAE,CACzEwB,WAAW,CAAC,IAAI,CAAC,CACrB,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,mBACI3B,KAAA,QAAK+B,SAAS,CAAEnC,MAAM,CAACoC,KAAM,CAAC7B,EAAE,IAAAkB,MAAA,CAAKlB,EAAE,CAAG,CAAA8B,QAAA,eACtCjC,KAAA,MAAGkC,IAAI,cAAAb,MAAA,CAAelB,EAAE,CAAG,CAAA8B,QAAA,eACvBnC,IAAA,QAAKiC,SAAS,CAAEnC,MAAM,CAACQ,GAAI,CAAC+B,GAAG,CAAE/B,GAAI,CAACgC,GAAG,CAAC,KAAK,CAAE,CAAC,cAClDtC,IAAA,OAAIiC,SAAS,CAAEnC,MAAM,CAACS,GAAI,CAAA4B,QAAA,CAAE5B,GAAG,CAAK,CAAC,cACrCP,IAAA,OAAIiC,SAAS,CAAEnC,MAAM,CAACU,IAAK,CAAA2B,QAAA,CAAE3B,IAAI,CAAK,CAAC,EACxC,CAAC,cACJR,IAAA,WAAQiC,SAAS,aAAAV,MAAA,CAAcK,QAAQ,EAAI,aAAa,CAAG,CAACW,OAAO,CAAE7B,WAAY,CAAAyB,QAAA,CAAC,mDAAS,CAAQ,CAAC,EACnG,CAAC,CAEd,CAAC,CAED,cAAe,CAAAhC,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}