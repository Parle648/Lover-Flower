{"ast":null,"code":"import _objectSpread from\"D:/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/redux/Lover-Flower/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/redux/Lover-Flower/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useForm}from'react-hook-form';import Rating from'../../features/Rating/Rating';import styles from'./styles/ReviewBlock.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReviewBlock=function ReviewBlock(_ref){var id=_ref.id;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),reviews=_React$useState2[0],setReviews=_React$useState2[1];var _React$useState3=React.useState(1),_React$useState4=_slicedToArray(_React$useState3,2),rating=_React$useState4[0],setRating=_React$useState4[1];React.useEffect(function(){fetch(\"http://localhost:5000/api/reviews/\").then(function(res){return res.json();}).then(function(res){return setReviews(res);});},[]);function sendReview(data){data.rating=rating;data.ProductId=Number(id===null||id===void 0?void 0:id.slice(1));fetch('http://localhost:5000/api/reviews',{method:'post',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}).then(function(res){return res.json();}).then(function(res){return console.log(res);});};console.log(reviews.some(function(elem){return elem.ProductId===Number(id===null||id===void 0?void 0:id.slice(1));}));return/*#__PURE__*/_jsxs(\"div\",{children:[reviews.some(function(elem){return elem.ProductId===Number(id===null||id===void 0?void 0:id.slice(1));})?reviews.map(function(elem){if(elem.ProductId===Number(id===null||id===void 0?void 0:id.slice(1))){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.laps,children:\"\\\"\"}),/*#__PURE__*/_jsx(\"h2\",{className:styles.review,children:elem.review}),/*#__PURE__*/_jsxs(\"h2\",{className:styles.name,children:[elem.name,\", date\"]})]},elem.id);}}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.greensubttl,children:\"\\u0411\\u0443\\u0434\\u044C\\u0442\\u0435 \\u043F\\u0435\\u0440\\u0432\\u044B\\u043C, \\u043A\\u0442\\u043E \\u043E\\u0441\\u0442\\u0430\\u0432\\u0438\\u043B \\u043E\\u0442\\u0437\\u044B\\u0432 \\u043D\\u0430 \\u201C\\u0420\\u0443\\u0431\\u0438\\u043D\\u043E\\u0432\\u044B\\u0435 \\u0438\\u0441\\u043A\\u0440\\u044B\\u201D\"}),/*#__PURE__*/_jsx(\"h2\",{className:styles.subttl,children:\"\\u0412\\u0430\\u0448 \\u0430\\u0434\\u0440\\u0435\\u0441 email \\u043D\\u0435 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u043E\\u0432\\u0430\\u043D. \\u041E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435 \\u043F\\u043E\\u043B\\u044F \\u043F\\u043E\\u043C\\u0435\\u0447\\u0435\\u043D\\u044B *\"}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(sendReview),children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.inputTtl,children:\"\\u0412\\u0430\\u0448 \\u043E\\u0442\\u0437\\u044B\\u0432*\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:styles.input,type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"},register(\"review\"))),/*#__PURE__*/_jsx(\"h2\",{className:styles.inputTtl,children:\"\\u0418\\u043C\\u044F*\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:styles.input,type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F\"},register(\"name\"))),/*#__PURE__*/_jsx(\"h2\",{className:styles.inputTtl,children:\"E-mail*\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:styles.input,type:\"text\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0443 \\u043F\\u043E\\u0447\\u0442\\u0443\"},register(\"mail\"))),/*#__PURE__*/_jsx(Rating,{choosedRating:\"1\",setRating:setRating}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"greenBtn\",children:\"\\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsxs(\"h2\",{className:styles.policy,children:[\"\\u041D\\u0430\\u0436\\u0438\\u043C\\u0430\\u044F  \\u043D\\u0430 \\u043A\\u043D\\u043E\\u043F\\u043A\\u0443 \\xAB\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\\xBB, \\u044F \\u0434\\u0430\\u044E \\u0441\\u0432\\u043E\\u0435 \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u0438\\u0435 \\u043D\\u0430 \\u043E\\u0431\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0443 \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u043B\\u044C\\u043D\\u044B\\u0445 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445, \\u0432 \\u0441\\u043E\\u043E\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0438\\u0438 \\u0441 \",/*#__PURE__*/_jsx(\"span\",{className:styles.pink,children:\"\\u041F\\u043E\\u043B\\u0438\\u0442\\u0438\\u043A\\u043E\\u0439 \\u043A\\u043E\\u043D\\u0444\\u0438\\u0434\\u0435\\u043D\\u0446\\u0438\\u0430\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\"})]})]})]});};export default ReviewBlock;","map":{"version":3,"names":["React","useForm","Rating","styles","jsx","_jsx","jsxs","_jsxs","ReviewBlock","_ref","id","_useForm","register","handleSubmit","_React$useState","useState","_React$useState2","_slicedToArray","reviews","setReviews","_React$useState3","_React$useState4","rating","setRating","useEffect","fetch","then","res","json","sendReview","data","ProductId","Number","slice","method","headers","body","JSON","stringify","console","log","some","elem","children","map","className","laps","review","name","greensubttl","subttl","onSubmit","inputTtl","_objectSpread","input","type","placeholder","choosedRating","policy","pink"],"sources":["D:/Рабочий стол/redux/Lover-Flower/client/src/widgets/ReviewBlock/ReviewBlock.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nimport { useForm } from 'react-hook-form';\r\nimport Rating from '../../features/Rating/Rating';\r\n\r\nimport styles from './styles/ReviewBlock.module.scss';\r\n\r\ntype ReviewsForm = {\r\n    id: string,\r\n}\r\n\r\nconst ReviewBlock = ({id}: ReviewsForm) => {\r\n    const { register, handleSubmit } = useForm();\r\n    const [reviews, setReviews] = React.useState([]);\r\n    let [rating, setRating]= React.useState(1);\r\n\r\n    React.useEffect(() => {\r\n        fetch(`http://localhost:5000/api/reviews/`).then((res: any) => res.json()).then((res: any) => setReviews(res))\r\n    }, []);\r\n\r\n    function sendReview(data: any) {\r\n        data.rating = rating;\r\n        data.ProductId = Number(id?.slice(1));\r\n\r\n        fetch('http://localhost:5000/api/reviews', {\r\n            method: 'post',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data),\r\n        }).then((res: any) => res.json())\r\n        .then((res: any) => console.log(res));\r\n    };\r\n\r\n    console.log(reviews.some((elem: any) => elem.ProductId === Number(id?.slice(1))));\r\n\r\n    return (\r\n        <div>\r\n            {reviews.some((elem: any) => elem.ProductId === Number(id?.slice(1))) ? reviews.map((elem: any) => {\r\n                if (elem.ProductId === Number(id?.slice(1))) {\r\n                    return (\r\n                        <div key={elem.id}>\r\n                            <h2 className={styles.laps}>\"</h2>\r\n                            <h2 className={styles.review}>{elem.review}</h2>\r\n                            <h2 className={styles.name}>{elem.name}, date</h2>\r\n                        </div>\r\n                    )\r\n                }\r\n            }) : \r\n            <div>\r\n                <h2 className={styles.greensubttl}>Будьте первым, кто оставил отзыв на “Рубиновые искры”</h2>\r\n                <h2 className={styles.subttl}>Ваш адрес email не будет опубликован. Обязательные поля помечены *</h2>\r\n                <br />\r\n            </div>\r\n            }\r\n            <form onSubmit={handleSubmit(sendReview)}>\r\n                <h2 className={styles.inputTtl}>Ваш отзыв*</h2>\r\n                <input className={styles.input} type=\"text\" placeholder='Введите комментарий' {...register(\"review\")}/>\r\n                <h2 className={styles.inputTtl}>Имя*</h2>\r\n                <input className={styles.input} type=\"text\" placeholder='Введите ваше имя' {...register(\"name\")}/>\r\n                <h2 className={styles.inputTtl}>E-mail*</h2>\r\n                <input className={styles.input} type=\"text\" placeholder='Введите вашу почту' {...register(\"mail\")}/>\r\n                <Rating choosedRating='1' setRating={setRating}/>\r\n                <br />\r\n                <button className='greenBtn'>отправить</button>\r\n\r\n                <h2 className={styles.policy}>Нажимая  на кнопку «Отправить», я даю свое согласие на обработку персональных данных, в соответствии с <span className={styles.pink}>Политикой конфиденциальности</span></h2>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ReviewBlock;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}