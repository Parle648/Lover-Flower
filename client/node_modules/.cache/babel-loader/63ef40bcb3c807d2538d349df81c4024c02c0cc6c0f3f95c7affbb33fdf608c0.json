{"ast":null,"code":"import _slicedToArray from\"D:/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/redux/Lover-Flower/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import styles from'./styles/sroductSnippet.module.scss';import img from'../../img/second-product-img.png';import{useDispatch}from'react-redux';import{countPlus,countMinus,removeProduct}from'../../redux/slices/Busket.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductSnippet=function ProductSnippet(_ref){var cost=_ref.cost,count=_ref.count,ttl=_ref.ttl,id=_ref.id;var dispatch=useDispatch();var _React$useState=React.useState(count),_React$useState2=_slicedToArray(_React$useState,2),choosedCount=_React$useState2[0],setChoosedCount=_React$useState2[1];function updateState(){var result=JSON.parse(localStorage.BusketInform).filter(function(obj){if(id!==obj.id){return obj;}});localStorage.setItem('BusketInform',JSON.stringify(result));dispatch(removeProduct(id));};function chooseCount(event){if(event.currentTarget.innerText==='+'){setChoosedCount(choosedCount+=1);dispatch(countPlus(id));}else if(choosedCount>1){setChoosedCount(choosedCount-=1);dispatch(countMinus(id));};var choosedLocal=JSON.parse(localStorage.BusketInform).map(function(elem){if(elem.id===id){elem.count=choosedCount;};return elem;});localStorage.setItem('BusketInform',JSON.stringify(choosedLocal));}return/*#__PURE__*/_jsxs(\"div\",{className:styles.block,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.firstBlock,children:[/*#__PURE__*/_jsx(\"img\",{className:styles.img,src:img,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.productTtl,children:ttl}),/*#__PURE__*/_jsxs(\"div\",{className:styles.counter,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.minus,onClick:chooseCount,children:\"\\u2013\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.count,children:count}),/*#__PURE__*/_jsx(\"button\",{className:styles.plus,onClick:chooseCount,children:\"+\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.costBlokc,children:[/*#__PURE__*/_jsxs(\"h2\",{className:styles.cost,children:[cost,\" \\u20BD\"]}),/*#__PURE__*/_jsx(\"h2\",{className:styles.remove,onClick:updateState,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]});};export default ProductSnippet;","map":{"version":3,"names":["React","styles","img","useDispatch","countPlus","countMinus","removeProduct","jsx","_jsx","jsxs","_jsxs","ProductSnippet","_ref","cost","count","ttl","id","dispatch","_React$useState","useState","_React$useState2","_slicedToArray","choosedCount","setChoosedCount","updateState","result","JSON","parse","localStorage","BusketInform","filter","obj","setItem","stringify","chooseCount","event","currentTarget","innerText","choosedLocal","map","elem","className","block","children","firstBlock","src","alt","productTtl","counter","minus","onClick","plus","costBlokc","remove"],"sources":["D:/Рабочий стол/redux/Lover-Flower/client/src/entities/ProductSnippet/ProductSnippet.tsx"],"sourcesContent":["import React from 'react';\r\nimport styles from './styles/sroductSnippet.module.scss';\r\nimport img from '../../img/second-product-img.png';\r\nimport { useDispatch } from 'react-redux';\r\nimport { countPlus, countMinus, removeProduct, } from '../../redux/slices/Busket.js';\r\n\r\ntype Product = {\r\n    id: number,\r\n    cost: number,\r\n    count: number,\r\n    ttl: string,\r\n};\r\n\r\nconst ProductSnippet = ({cost, count, ttl, id}: Product) => {\r\n    const dispatch = useDispatch();\r\n    let [choosedCount, setChoosedCount] = React.useState(count);\r\n\r\n    function updateState() {\r\n        const result = JSON.parse(localStorage.BusketInform).filter((obj: Product) => {\r\n            if (id !== obj.id) {\r\n                return obj;\r\n            }\r\n        });\r\n\r\n        localStorage.setItem('BusketInform', JSON.stringify(result));\r\n        dispatch(removeProduct(id));\r\n    };\r\n\r\n    function chooseCount(event: React.MouseEvent<HTMLButtonElement>) {\r\n        if (event.currentTarget.innerText === '+') {\r\n            setChoosedCount(choosedCount += 1);\r\n            dispatch(countPlus(id));\r\n        } else if (choosedCount > 1) { \r\n            setChoosedCount(choosedCount -= 1);\r\n            dispatch(countMinus(id));\r\n        };\r\n\r\n        const choosedLocal = JSON.parse(localStorage.BusketInform).map((elem: Product) => {\r\n            if (elem.id === id) {\r\n                elem.count = choosedCount;\r\n            };\r\n            return elem;\r\n        });\r\n\r\n        localStorage.setItem('BusketInform', JSON.stringify(choosedLocal));\r\n    }\r\n    \r\n    return (\r\n        <div className={styles.block}>\r\n            <div className={styles.firstBlock}>\r\n                <img className={styles.img} src={img} alt=\"\" />\r\n                <div>\r\n                    <h2 className={styles.productTtl}>{ttl}</h2>\r\n                    <div className={styles.counter}>\r\n                        <button className={styles.minus} onClick={chooseCount}>–</button>\r\n                        <div className={styles.count}>{count}</div>\r\n                        <button className={styles.plus} onClick={chooseCount}>+</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className={styles.costBlokc}>\r\n                <h2 className={styles.cost}>{cost} ₽</h2>\r\n                <h2 className={styles.remove} onClick={updateState}>Удалить</h2>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductSnippet;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}