{"ast":null,"code":"import _slicedToArray from\"D:/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/redux/Lover-Flower/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import ProductSnippet from'../../entities/ProductSnippet/ProductSnippet';import styles from'./styles/basket.module.scss';import busketImg from'../../img/busket.svg';import close from'../../img/busket-close.png';import{useSelector,useDispatch}from'react-redux';import{updateStore}from'../../redux/slices/Busket.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Basket=function Basket(){var dispatch=useDispatch();var addedPeoducts=useSelector(function(state){return state.basket.value;});var productCount=addedPeoducts.reduce(function(amount,obj){return amount+obj.count;},0);var productAmount=addedPeoducts.reduce(function(amount,obj){return amount+obj.count*obj.cost;},0);// updating the store after a reload\nReact.useEffect(function(){dispatch(updateStore(JSON.parse(localStorage.BusketInform)));addedPeoducts=JSON.parse(localStorage.BusketInform);},[]);// toggle busket block\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),busketOpened=_React$useState2[0],setBusketOpened=_React$useState2[1];function toggleBusket(){setBusketOpened(!busketOpened);};return/*#__PURE__*/_jsxs(\"div\",{className:styles.block,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.container,onClick:toggleBusket,children:[/*#__PURE__*/_jsx(\"img\",{src:busketImg,alt:\"busketImg\"}),/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(styles.counter,\" \").concat(productCount<1&&styles.unvisible),children:productCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.busketAside,\" \").concat(busketOpened&&styles.busketOpened),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:styles.asideTtl,children:[\"\\u0412\\u0430\\u0448\\u0430 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \",/*#__PURE__*/_jsx(\"img\",{className:styles.closeBtn,src:close,alt:\"close\",onClick:toggleBusket})]}),/*#__PURE__*/_jsx(\"div\",{className:busketOpened&&styles.blackBackround}),/*#__PURE__*/_jsx(\"div\",{className:styles.products,children:addedPeoducts.map(function(obj){return/*#__PURE__*/_jsx(ProductSnippet,{id:obj.id,ttl:obj.ttl,cost:obj.cost,count:obj.count});})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:styles.asideParagraph,children:[/*#__PURE__*/_jsxs(\"span\",{className:styles.green,children:[\"\\u041F\\u0440\\u0435\\u0434\\u0432\\u0430\\u0440\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0439 \\u0438\\u0442\\u043E\\u0433: \",productAmount,\" \\u0440\\u0443\\u0431.\"]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u0427\\u0442\\u043E\\u0431\\u044B \\u0443\\u0437\\u043D\\u0430\\u0442\\u044C \\u0441\\u0442\\u043E\\u0438\\u043C\\u043E\\u0441\\u0442\\u044C \\u0434\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0438, \\u043F\\u0435\\u0440\\u0435\\u0439\\u0434\\u0438\\u0442\\u0435 \\u043A \\u043E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u0438\\u044E \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430.\"]}),/*#__PURE__*/_jsx(\"a\",{href:\"/order\",children:/*#__PURE__*/_jsx(\"button\",{className:styles.btn,children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"})})]})]})]});};export default Basket;","map":{"version":3,"names":["React","ProductSnippet","styles","busketImg","close","useSelector","useDispatch","updateStore","jsx","_jsx","jsxs","_jsxs","Basket","dispatch","addedPeoducts","state","basket","value","productCount","reduce","amount","obj","count","productAmount","cost","useEffect","JSON","parse","localStorage","BusketInform","_React$useState","useState","_React$useState2","_slicedToArray","busketOpened","setBusketOpened","toggleBusket","className","block","children","container","onClick","src","alt","concat","counter","unvisible","busketAside","asideTtl","closeBtn","blackBackround","products","map","id","ttl","asideParagraph","green","href","btn"],"sources":["D:/Рабочий стол/redux/Lover-Flower/client/src/features/Basket/index.tsx"],"sourcesContent":["import React from 'react';\r\nimport ProductSnippet from '../../entities/ProductSnippet/ProductSnippet';\r\nimport styles from './styles/basket.module.scss';\r\nimport busketImg from '../../img/busket.svg';\r\nimport close from '../../img/busket-close.png';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { updateStore } from '../../redux/slices/Busket.js';\r\n\r\ntype Product = {\r\n    id: number,\r\n    cost: number,\r\n    ttl: string,\r\n    count: number,\r\n};\r\n\r\nconst Basket = () => {\r\n    const dispatch = useDispatch();\r\n    \r\n    let addedPeoducts = useSelector((state: any) => state.basket.value);\r\n    const productCount = addedPeoducts.reduce((amount: number, obj: Product) => {return amount + obj.count}, 0);\r\n    const productAmount = addedPeoducts.reduce((amount: number, obj: Product) => {return amount + (obj.count * obj.cost)}, 0);\r\n\r\n    // updating the store after a reload\r\n    React.useEffect(() => {\r\n        dispatch(updateStore(JSON.parse(localStorage.BusketInform)));\r\n        addedPeoducts = JSON.parse(localStorage.BusketInform);\r\n    }, []);\r\n\r\n    // toggle busket block\r\n    const [busketOpened, setBusketOpened] = React.useState(false);\r\n\r\n    function toggleBusket() {\r\n        setBusketOpened(!busketOpened);\r\n    };\r\n    \r\n    return (\r\n        <div className={styles.block}>\r\n            <div className={styles.container} onClick={toggleBusket}>\r\n                <img src={busketImg} alt=\"busketImg\" />\r\n                <div className={`${styles.counter} ${productCount < 1 && styles.unvisible}`}>{productCount}</div>\r\n            </div>\r\n            <div className={`${styles.busketAside} ${busketOpened && styles.busketOpened}`} >\r\n                <div>\r\n                    <h2 className={styles.asideTtl}>Ваша корзина <img className={styles.closeBtn} src={close} alt=\"close\" onClick={toggleBusket}/></h2>\r\n                    <div className={busketOpened && styles.blackBackround}></div>\r\n                    <div className={styles.products}>\r\n                        {addedPeoducts.map((obj: Product) => {\r\n                            return <ProductSnippet id={obj.id} ttl={obj.ttl} cost={obj.cost} count={obj.count} />\r\n                        })}\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <p className={styles.asideParagraph}>\r\n                        <span className={styles.green}>Предварительный итог: {productAmount} руб.</span> <br />\r\n                        Чтобы узнать стоимость доставки, перейдите к оформлению заказа.\r\n                    </p>\r\n                    <a href=\"/order\"><button className={styles.btn}>Оформить заказ</button></a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Basket;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}